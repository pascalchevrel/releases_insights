{% extends 'base.html.twig' %}

  {% block header %}
  <header class="mx-auto">
    <h1>Firefox Release Calendar</h1>
  </header>
{% endblock %}


{% block main %}

<table class="table table-light table-striped table-hover table-bordered table-sm w-75 justify-content-center mt-4 text-center">
  <thead>
  <tr>
    <th colspan="7" class="text-center table-warning">Upcoming {{ 'now' | date('Y') }} releases</th>
  </tr>
  <tr>
    <th scope="col">Quarter</th>
    <th scope="col">Version</th>
    <th scope="col">Nightly starts</th>
    <th scope="col" title="The Nightly soft code freeze is typically during the week prior to merge day. During this period high-risk patches should avoid landing until after the Nightly version bump lands on mozilla-central on merge day">Soft code freeze</th>
    <th scope="col">Beta starts</th>
    <th scope="col">Release day</th>
    <th scope="col">Matching ESR</th>
  </tr>
</thead>
<tbody>
{% set check = 0 %}
{% set date_pattern = 'MMMM d' %}
{% for values in upcoming_releases %}
  <tr>
  {% if check != values.quarter %}
    {% set rowspan = upcoming_quarters[values.quarter] %}
    <th rowspan="{{ rowspan}}" class="force-default-bg align-middle">{{ values.quarter }}</th>
    {% set check = values.quarter %}
  {% endif %}
    <td><a href="/release/?version={{ values.version }}">{{ values.version }}</a></td>
    <td>{{ values.nightly_start|format_date(pattern=date_pattern, locale='en')}}</td>
    <td>{{ values.soft_freeze|format_date(pattern=date_pattern, locale='en')}}</td>
    <td>{{ values.beta_start|format_date(pattern=date_pattern, locale='en') }}</td>
    <td>{{ values.release_date|format_date(pattern=date_pattern , locale='en') }}</td>
    <td class="text-end">{{ values.esr }}</td>
  </tr>
{% endfor %}
</tbody>

</table>

{% set date_pattern = 'YYYY-MM-dd' %}
<details class="justify-content-center mt-4 text-center  ">
  <summary>Click to expand past releases data</summary>
<table class="table table-light table-striped table-hover table-bordered table-sm w-75 justify-content-center mt-4 text-center">
  <thead>
  <tr>
    <th colspan="7" class="text-center table-warning">Past releases</th>
  </tr>
  <tr>
    <th scope="col">Version</th>
    <th scope="col">Nightly starts</th>
    <th scope="col">Beta starts</th>
    <th scope="col">Release day</th>
    <th scope="col">Matching ESR</th>
  </tr>
</thead>
<tbody>
{% for values in past_releases %}
  <tr>
    <td><a href="/release/?version={{ values.version }}">{{ values.version }}</a></td>
    <td>{{ values.nightly_start|format_date(pattern=date_pattern, locale='en')}}</td>
    <td>{{ values.beta_start|format_date(pattern=date_pattern, locale='en') }}</td>
    <td>{{ values.release_date|format_date(pattern=date_pattern , locale='en') }}</td>
    <td class="text-end">{{ values.esr }}</td>
  </tr>
{% endfor %}
</tbody>

</table>
</details>
{% endblock %}

{% block footer %}
     {%  include 'footer_UTC_warning.html.twig' %}
{% endblock %}